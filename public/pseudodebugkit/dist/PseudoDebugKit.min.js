var h=(n="#ff6b6b",t="pdk-")=>`
:root{--${t}accent:${n};--${t}panel-bg:rgba(255,255,255,0.9);}
#${t}dbg-toolbar{position:fixed;right:12px;top:12px;z-index:2147483000;display:flex;flex-direction:column;gap:6px;padding:8px;border-radius:10px;background:var(--${t}panel-bg);backdrop-filter:blur(4px);font-family:system-ui, sans-serif;font-size:13px;color:#111;box-shadow:0 6px 18px rgba(0,0,0,.12);}
#${t}dbg-toolbar button{background:none;border:1px solid #ddd;padding:6px 8px;border-radius:6px;cursor:pointer;}
#${t}dbg-toolbar .${t}active{border-color:var(--${t}accent);}
#${t}dbg-grid{position:fixed;inset:0;pointer-events:none;z-index:2147482000;display:none;}
#${t}dbg-grid .${t}cols{height:100%;display:flex;gap:12px;padding:0 12px;}
#${t}dbg-grid .${t}col{flex:1;background:rgba(255,107,107,0.05);border-left:1px dashed rgba(0,0,0,0.04);}
.${t}dbg-outline{outline:2px dashed rgba(0,0,0,0.2);}
.${t}dbg-tag::after{content:attr(data-dbg);position:absolute;left:4px;top:-1.6em;background:rgba(0,0,0,.75);color:#fff;font-size:10px;padding:2px 6px;border-radius:6px;transition:opacity .12s;white-space:nowrap;z-index:2000;opacity:0.8;pointer-events:none;}
:where(.${t}dbg-tag) {position: relative;}
#${t}dbg-hover-overlay {position: fixed;top: 0;left: 0;z-index: 2147483600;pointer-events: none;display: none;overflow: visible;}
#${t}dbg-hover-overlay > div {position: absolute;box-sizing: border-box;}
#${t}dbg-hover-content {background: rgba(0,150,255,0.3);}
#${t}dbg-hover-padding {background: rgba(0,255,150,0.25);}
#${t}dbg-hover-margin {background: rgba(255,180,0,0.25);}
`;var r=class{opts;root;styleEl;gridEl;toolbarEl;state={wire:!1,grid:!1,tags:!1,highlight:!1,styleInfo:!1};overlayRoot;overlayContent;overlayPadding;overlayMargin;stylePanel;shortcutCleanup;styleCache=new WeakMap;parsedValuesCache=new WeakMap;constructor(t){this.opts={gridColumns:12,accent:"#ff6b6b",panel:!1,shortcuts:!1,prefix:"pdk-",...t||{}}}init(t=document.body){this.root||(this.root=t,this.injectStyle(),this.buildUI(),this.buildHighlightOverlay(),this.buildStylePanel(),this.opts.shortcuts&&(this.shortcutCleanup=this.bindShortcuts()))}markInternal(t){t.setAttribute(`data-${this.opts.prefix}internal`,"1")}isInternal(t){return t instanceof HTMLElement&&t.hasAttribute(`data-${this.opts.prefix}internal`)}injectStyle(){this.styleEl=document.createElement("style"),this.styleEl.setAttribute("data-pseudo-debugkit-style",""),this.styleEl.textContent=h(this.opts.accent,this.opts.prefix),document.head.appendChild(this.styleEl)}buildUI(){this.opts.panel&&(this.buildToolbar(),this.buildGrid())}buildToolbar(){this.toolbarEl=document.createElement("div"),this.toolbarEl.id=`${this.opts.prefix}dbg-toolbar`,this.markInternal(this.toolbarEl);let t=[["wire","Wireframe"],["highlight","Highlight"],["styleInfo","Style Info"],["tags","Tags"],["grid","Grid"]];for(let[e,i]of t){let s=document.createElement("button");s.dataset.mode=e,s.textContent=i,this.markInternal(s),s.addEventListener("click",()=>this.toggleMode(e,s)),this.toolbarEl.appendChild(s)}document.body.appendChild(this.toolbarEl)}buildGrid(){this.gridEl=document.createElement("div"),this.gridEl.id=`${this.opts.prefix}dbg-grid`,this.markInternal(this.gridEl);let t=document.createElement("div");t.className=`${this.opts.prefix}cols`,this.markInternal(t),this.gridEl.appendChild(t),document.body.appendChild(this.gridEl),this.setGridColumns(this.opts.gridColumns||12)}setGridColumns(t){if(!this.gridEl)return;let e=this.gridEl.querySelector(`.${this.opts.prefix}cols`);if(e){for(;e.firstChild;)e.removeChild(e.firstChild);for(let i=0;i<t;i++){let s=document.createElement("div");s.className=`${this.opts.prefix}col`,this.markInternal(s),e.appendChild(s)}}}enable(){this.show(!0)}disable(){this.show(!1)}toggle(){this.show(!this.isEnabled())}isEnabled(){return!!this.root}setWire(t){this.applyWire(t)}setGrid(t){this.applyGrid(t)}setTags(t){this.applyTags(t)}setHighlight(t){this.state.highlight=t}setStyleInfo(t){this.state.styleInfo=t}getState(){return{...this.state}}show(t){this.root&&(this.toolbarEl&&(this.toolbarEl.style.display=t?"flex":"none"),this.gridEl&&(this.gridEl.style.display=t&&this.state.grid?"block":"none"))}destroy(){let t=[this.styleEl,this.toolbarEl,this.gridEl,this.overlayRoot,this.stylePanel];for(let e of t)e?.remove();this.shortcutCleanup?.(),this.root=void 0}buildHighlightOverlay(){let t=this.opts.prefix;this.overlayRoot=document.createElement("div"),this.overlayRoot.id=`${t}dbg-hover-overlay`,this.markInternal(this.overlayRoot);let e=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div");e.id=`${t}dbg-hover-content`,i.id=`${t}dbg-hover-padding`,s.id=`${t}dbg-hover-margin`,this.markInternal(e),this.markInternal(i),this.markInternal(s),this.overlayRoot.appendChild(s),this.overlayRoot.appendChild(i),this.overlayRoot.appendChild(e),this.overlayContent=e,this.overlayPadding=i,this.overlayMargin=s,document.body.appendChild(this.overlayRoot);let o=this.debounce(l=>{!this.state.highlight&&!this.state.styleInfo||!l||this.isInternal(l)||(this.state.highlight&&this.updateHighlight(l),this.state.styleInfo&&this.updateStyleInfo(l))},10),a=this.debounce(()=>{this.overlayRoot&&(this.overlayRoot.style.display="none"),this.stylePanel&&(this.stylePanel.style.display="none")},10);document.addEventListener("mouseover",l=>{o(l.target)}),document.addEventListener("mouseout",l=>{a()})}debounce(t,e){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>t(...s),e)}}getStyleCache(t){return this.styleCache.has(t)||this.styleCache.set(t,getComputedStyle(t)),this.styleCache.get(t)}parseCSSValue(t,e){this.parsedValuesCache.has(t)||this.parsedValuesCache.set(t,new Map);let i=this.parsedValuesCache.get(t);return i.has(e)||i.set(e,parseFloat(t.getPropertyValue(e))),i.get(e)}updateHighlight(t){if(!this.overlayRoot)return;let e=t.getBoundingClientRect(),i=this.getStyleCache(t),s={top:this.parseCSSValue(i,"padding-top"),right:this.parseCSSValue(i,"padding-right"),bottom:this.parseCSSValue(i,"padding-bottom"),left:this.parseCSSValue(i,"padding-left")},o={top:this.parseCSSValue(i,"margin-top"),right:this.parseCSSValue(i,"margin-right"),bottom:this.parseCSSValue(i,"margin-bottom"),left:this.parseCSSValue(i,"margin-left")};this.overlayRoot.style.display="block",this.overlayRoot.style.top=this.px(e.top-o.top),this.overlayRoot.style.left=this.px(e.left-o.left),this.overlayRoot.style.width=this.px(e.width+o.left+o.right),this.overlayRoot.style.height=this.px(e.height+o.top+o.bottom),this.overlayRoot.style.overflow="visible",this.overlayMargin.style.top="0px",this.overlayMargin.style.left="0px",this.overlayMargin.style.width="100%",this.overlayMargin.style.height="100%",this.overlayPadding.style.top=this.px(o.top),this.overlayPadding.style.left=this.px(o.left),this.overlayPadding.style.width=this.px(e.width),this.overlayPadding.style.height=this.px(e.height),this.overlayContent.style.top=this.px(o.top+s.top),this.overlayContent.style.left=this.px(o.left+s.left),this.overlayContent.style.width=this.px(e.width-s.left-s.right),this.overlayContent.style.height=this.px(e.height-s.top-s.bottom)}buildStylePanel(){let t=this.opts.prefix;this.stylePanel=document.createElement("div"),this.stylePanel.id=`${t}dbg-style-panel`,this.markInternal(this.stylePanel),this.stylePanel.style.position="fixed",this.stylePanel.style.top="12px",this.stylePanel.style.right="12px",this.stylePanel.style.background="rgba(0,0,0,0.75)",this.stylePanel.style.color="#fff",this.stylePanel.style.fontSize="12px",this.stylePanel.style.padding="6px 8px",this.stylePanel.style.borderRadius="6px",this.stylePanel.style.pointerEvents="none",this.stylePanel.style.zIndex="2147483601",this.stylePanel.style.display="none",document.body.appendChild(this.stylePanel)}px(t){return`${Math.round(t)}px`}updateStyleInfo(t){if(!this.stylePanel)return;let e=this.getStyleCache(t);this.stylePanel.innerHTML=`
<b>${t.tagName.toLowerCase()}${t.id?`#${t.id}`:""}</b><br>
color: ${e.color}<br>
background: ${e.backgroundColor}<br>
font-size: ${e.fontSize}<br>
line-height: ${e.lineHeight}<br>
padding: ${e.paddingTop} ${e.paddingRight} ${e.paddingBottom} ${e.paddingLeft}<br>
margin: ${e.marginTop} ${e.marginRight} ${e.marginBottom} ${e.marginLeft}
`,this.stylePanel.style.display="block"}traverseDOM(t,e){if(!this.isInternal(t)){t.nodeType===Node.ELEMENT_NODE&&e(t);for(let i=0;i<t.childNodes.length;i++)this.traverseDOM(t.childNodes[i],e)}}applyWire(t){this.traverseDOM(document.body,e=>{this.isInternal(e)||e.classList.toggle(`${this.opts.prefix}dbg-outline`,t)}),this.state.wire=t}applyGrid(t){this.gridEl&&(this.gridEl.style.display=t?"block":"none"),this.state.grid=t}applyTags(t){this.traverseDOM(document.body,e=>{if(this.isInternal(e))return;let i=e;if(t){let s=Array.from(i.classList).filter(a=>!a.startsWith(this.opts.prefix??"")),o=i.tagName.toLowerCase()+(i.id?`#${i.id}`:"")+(s.length?` .${s.join(".")}`:"");i.dataset.dbg=o}else delete i.dataset.dbg;i.classList.toggle(`${this.opts.prefix}dbg-tag`,t)}),this.state.tags=t}toggleMode(t,e){let i={wire:a=>this.applyWire(a),highlight:a=>this.state.highlight=a,grid:a=>this.applyGrid(a),tags:a=>this.applyTags(a),styleInfo:a=>this.state.styleInfo=a},o=!this.state[t];i[t](o),e&&e.classList.toggle(`${this.opts.prefix}active`,o)}bindShortcuts(){let t=e=>{e.ctrlKey&&e.altKey&&e.code==="Pause"&&(this.applyWire(!1),this.applyGrid(!1),this.applyTags(!1),this.state.highlight=!1,this.state.styleInfo=!1,this.toolbarEl&&this.traverseDOM(this.toolbarEl,i=>{i.tagName==="BUTTON"&&i.classList.remove(`${this.opts.prefix}active`)}),this.overlayRoot&&(this.overlayRoot.style.display="none"),this.stylePanel&&(this.stylePanel.style.display="none"),Object.keys(this.state).forEach(i=>this.state[i]=!1))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}};typeof window<"u"&&(window.PseudoDebugKit=r);export{r as PseudoDebugKit};
//# sourceMappingURL=PseudoDebugKit.min.js.map
